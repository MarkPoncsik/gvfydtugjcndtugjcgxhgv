<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>–î–ª—è —Ç–µ–±—è</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(to right, #fbc2eb, #a6c1ee);
      color: #333;
      text-align: center;
      padding: 40px;
      overflow-x: hidden;
    }

    .hidden { display: none; }
    .btn {
      padding: 10px 20px;
      margin-top: 20px;
      background-color: #ff88bb;
      border: none;
      color: white;
      border-radius: 10px;
      cursor: pointer;
      font-size: 18px;
    }

    .grid {
      display: grid;
      gap: 15px;
      justify-content: center;
      margin-top: 20px;
    }

    .wordBlock {
      font-family: monospace;
      font-size: 18px;
      line-height: 1.6;
      width: 90%;
      max-width: 600px;
      margin: 0 auto;
      background: white;
      padding: 20px;
      border-radius: 10px;
    }

    .card, .memory-card {
      width: 80px;
      height: 80px;
      background: white;
      border-radius: 10px;
      font-size: 28px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    }

    #final h2 {
      animation: fadeIn 2s ease-in-out;
      font-size: 28px;
      color: #fff;
      margin-bottom: 10px;
    }

    #final p {
      font-size: 22px;
      color: #fff;
      animation: fadeIn 3s ease-in-out;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .heart {
      position: absolute;
      color: #ff4d6d;
      font-size: 24px;
      animation: float 6s infinite;
    }

    @keyframes float {
      0% { transform: translateY(0); opacity: 1; }
      100% { transform: translateY(-100vh); opacity: 0; }
    }
  </style>
</head>
<body>

<h1>–ú–∏–Ω–∏-–∫–≤–µ—Å—Ç –¥–ª—è —Ç–µ–±—è</h1>

<!-- –ò–≥—Ä–∞ 1: –í–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å -->
<div id="step1">
  <h2>–ù–∞–π–¥–∏ —Å–ª–æ–≤–æ —Å—Ä–µ–¥–∏ —Ö–∞–æ—Å–∞</h2>
  <div class="wordBlock" id="wordBlock"></div>
  <input type="text" id="wordInput" placeholder="–ß—Ç–æ —Ç—ã –Ω–∞—à–ª–∞?">
  <br>
  <button class="btn" onclick="checkWord()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
</div>

<!-- –ò–≥—Ä–∞ 2: Memory Match -->
<div id="step2" class="hidden">
  <h2>–ù–∞–π–¥–∏ –ø–∞—Ä—ã</h2>
  <div class="grid" id="memoryGrid" style="grid-template-columns: repeat(4, 80px);"></div>
</div>

<!-- –ò–≥—Ä–∞ 3: –ù–∞–π–¥–∏ —Å–µ—Ä–¥–µ—á–∫–æ -->
<div id="step3" class="hidden">
  <h2>–ù–∞–π–¥–∏ —Å–µ—Ä–¥–µ—á–∫–æ</h2>
  <div class="grid" id="heartGrid" style="grid-template-columns: repeat(3, 100px);"></div>
</div>

<!-- –§–∏–Ω–∞–ª -->
<div id="final" class="hidden">
  <h2>–¢—ã –ø—Ä–æ—à–ª–∞ –≤—Å—ë!</h2>
  <p>–¢—ã —á—É–¥–æ. –°–ø–∞—Å–∏–±–æ, —á—Ç–æ —Ç—ã –µ—Å—Ç—å. –Ø —Ç–µ–±—è –ª—é–±–ª—é.</p>
</div>

<script>
  // –ò–≥—Ä–∞ 1 ‚Äî –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å
  const hiddenWord = "–ª—é–±–æ–≤—å";
  const symbols = "abcdefghijklmnopqrstuvwxyz1234567890!?@#$%^&*–∞–±–≤–≥–¥–µ–∂–∑–∏–π–∫–ª–º–Ω–æ–ø—Ä—Å—Ç—É—Ñ—Ö—Ü—á—à—â—ä—ã—å—ç—é—è".split('');
  const chaos = () => {
    let str = "";
    for (let i = 0; i < 600; i++) {
      if (i === 250) str += hiddenWord;
      else str += symbols[Math.floor(Math.random() * symbols.length)];
    }
    return str.match(/.{1,50}/g).join('\n');
  };
  document.getElementById("wordBlock").innerText = chaos();

  function checkWord() {
    const input = document.getElementById("wordInput").value.toLowerCase().trim();
    if (input === hiddenWord) {
      document.getElementById("step1").classList.add("hidden");
      document.getElementById("step2").classList.remove("hidden");
      initMemoryGame();
    } else {
      alert("–ü–æ–ø—Ä–æ–±—É–π –µ—â—ë!");
    }
  }

  // –ò–≥—Ä–∞ 2 ‚Äî memory match
  let firstCard = null;
  let lock = false;
  let matchedPairs = 0;
  function initMemoryGame() {
    const emojis = ["üçì","üå∏","‚≠ê","üç©"];
    let pairs = emojis.concat(emojis).sort(() => 0.5 - Math.random());
    const grid = document.getElementById("memoryGrid");

    pairs.forEach((emoji, index) => {
      const card = document.createElement("div");
      card.className = "memory-card";
      card.dataset.value = emoji;
      card.textContent = "";
      card.onclick = () => {
        if (lock || card.textContent) return;
        card.textContent = emoji;
        if (!firstCard) {
          firstCard = card;
        } else {
          if (firstCard.dataset.value === card.dataset.value) {
            firstCard = null;
            matchedPairs++;
            if (matchedPairs === 4) {
              setTimeout(() => {
                document.getElementById("step2").classList.add("hidden");
                document.getElementById("step3").classList.remove("hidden");
                initHeartGame();
              }, 600);
            }
          } else {
            lock = true;
            setTimeout(() => {
              card.textContent = "";
              firstCard.textContent = "";
              firstCard = null;
              lock = false;
            }, 800);
          }
        }
      };
      grid.appendChild(card);
    });
  }

  // –ò–≥—Ä–∞ 3 ‚Äî —Å–µ—Ä–¥–µ—á–∫–æ
  function initHeartGame() {
    const grid = document.getElementById("heartGrid");
    const heartIndex = Math.floor(Math.random() * 9);
    for (let i = 0; i < 9; i++) {
      const card = document.createElement("div");
      card.className = "card";
      card.textContent = "?";
      card.onclick = () => {
        if (i === heartIndex) {
          card.textContent = "‚ù§Ô∏è";
          setTimeout(() => {
            document.getElementById("step3").classList.add("hidden");
            document.getElementById("final").classList.remove("hidden");
            startHearts();
          }, 1000);
        } else {
          card.textContent = "‚ùå";
          card.style.pointerEvents = "none";
        }
      };
      grid.appendChild(card);
    }
  }

  // –ê–Ω–∏–º–∞—Ü–∏—è —Ñ–∏–Ω–∞–ª–∞
  function startHearts() {
    for (let i = 0; i < 30; i++) {
      const heart = document.createElement("div");
      heart.className = "heart";
      heart.textContent = "‚ù§Ô∏è";
      heart.style.left = Math.random() * 100 + "vw";
      heart.style.top = "100vh";
      heart.style.fontSize = 16 + Math.random() * 24 + "px";
      heart.style.animationDuration = 3 + Math.random() * 5 + "s";
      document.body.appendChild(heart);
      setTimeout(() => heart.remove(), 8000);
    }
  }
</script>

</body>
</html>
